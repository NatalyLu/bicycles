let e=document.querySelector("body"),t=document.querySelector("#burger"),n=document.querySelector(".main-nav__list"),a=(e,t)=>{t.map(t=>{e.classList.contains(t)&&e.classList.remove(t)})};window.util={ESC_KEYCODE:27,ENTER_KEYCODE:13,FORM_ACTION:"https://echo.htmlacademy.ru/"};let s=n=>{let a;return t.classList.contains("active")&&t.classList.contains("open")?(e.classList.remove("menu-open"),t.classList.remove("open"),a="false",n.classList.add("element-hidden")):(e.classList.add("menu-open"),t.classList.add("open"),a="true",n.classList.remove("element-hidden")),a};!function(){t.classList.add("active"),t.classList.remove("open"),n.classList.add("element-hidden"),t.addEventListener("click",t=>{t.preventDefault(),e(t,n)}),t.addEventListener("keydown",t=>{t.keyCode===window.util.ENTER_KEYCODE&&e(t,n)});let e=(e,n)=>{e.preventDefault(),t.setAttribute("aria-expanded",s(n))}}();let l=e=>{let t;cancelAnimationFrame(t);let n=performance.now(),a=window.pageYOffset||document.documentElement.scrollTop,s=document.querySelector(e).getBoundingClientRect().top,l=.4*Math.abs(s);requestAnimationFrame(step=e=>{var r=(e-n)/l;1<=r&&(r=1),window.scrollTo(0,a+s*r|0),1>r&&(t=requestAnimationFrame(step)),document.addEventListener("wheel",(function(){cancelAnimationFrame(t)}))})};n.addEventListener("click",e=>{e.preventDefault();let t=e.target.getAttribute("href");s(n),setTimeout(()=>{l(t)},300)}),function(){let e=document.querySelector(".form"),t="error",n="success",s=!0,l="",r="",o=e.querySelector("[name='phone']"),c=e.querySelector("[name='name']");try{l=localStorage.getItem("userPhone"),r=localStorage.getItem("userName")}catch(e){s=!1}let i=e=>{let n=e.querySelector("input[name='phone']"),s=0;return/^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/.test(n.value)?a(n.parentElement,[t]):(n.parentElement.classList.add(t),s++),s},d=(e,t)=>{e.reset(),e.classList.add(t)};localStorage&&(o.value=l,c.value=r),e.addEventListener("submit",l=>{l.preventDefault(),(async(e,l,r)=>{if(e.preventDefault(),a(l,[t,n]),0===i(l)){s&&(localStorage.setItem("userPhone",o.value),localStorage.setItem("userName",c.value)),(await fetch(r,{method:"POST",body:new FormData(l)})).ok?d(l,n):d(l,t)}})(l,e,window.util.FORM_ACTION)}),e.addEventListener("input",s=>{a(s.target.parentElement,[t]),a(e,[t,n])})}();